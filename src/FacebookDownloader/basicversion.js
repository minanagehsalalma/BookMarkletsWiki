javascript:(async()=>{const m=location.href.match(/[?&]v=(\d{5,})/);if(/facebook\.com\/watch/.test(location.href)&&m){location.href=https://www.facebook.com/story.php?story_fbid=${m[1]}&id=${m[1]};return;}const%20$=(q,c=document)=%3E[...c.querySelectorAll(q)],fmtD=s=%3EisFinite(s)?new%20Date(s*1e3).toISOString().substr(11,8):%27?%27,fmtMB=b=%3Eb?(+b/1048576).toFixed(2)+%27%E2%80%AFMB%27:%27?%27;const%20grabDOM=()=%3E{const%20map=new%20Map();$(%27video%27).forEach(v=%3E{const%20add=u=%3Eu&&!u.startsWith(%27blob:%27)&&!map.has(u)&&map.set(u,{u,w:v.videoWidth,h:v.videoHeight,d:v.duration});add(v.currentSrc||v.src);$(%27source%27,v).forEach(s=%3Eadd(s.src))});$(%27meta[property=%22og:video%22],meta[property=%22og:video:secure_url%22]%27).forEach(t=%3E{const%20u=t.content;u&&!u.startsWith(%27blob:%27)&&!map.has(u)&&map.set(u,{u})});return[...map.values()]};const%20grabJSON=()=%3E{const%20out=[],rx=/%22(?:playable_url_quality_hd|playable_url|hd_src(?:_no_ratelimit)?|sd_src(?:_no_ratelimit)?)%22\s*:\s*%22([^%22]+\.mp4[^%22]*)%22/g;$(%27script%27).forEach(s=%3E{let%20z;while((z=rx.exec(s.textContent)))!z[1].startsWith(%27blob:%27)&&out.push(z[1].replace(/\\\//g,%27/%27).replace(/\\u0025/gi,%27%%27).replace(/\\u0026/gi,%27&%27))});return[...new%20Set(out)].map(u=%3E({u}))};const%20list=[...new%20Map([...grabDOM(),...grabJSON()].map(o=%3E[o.u,o])).values()];if(!list.length){alert(%27No%20video%20found%20%E2%80%93%20play%20it%20for%20a%20second,%20then%20run%20again.%27);return;}await%20Promise.all(list.map(async%20o=%3E{try{o.sz=+(await%20fetch(o.u,{method:%27HEAD%27})).headers.get(%27content-length%27)||0}catch{o.sz=0}}));const%20modal=document.createElement(%27div%27);modal.id=%27fbDLgui%27;modal.innerHTML=%3Cstyle%3E#fbDLgui{position:fixed;inset:0;z-index:2147483647;background:#0004;backdrop-filter:blur(2px);}#fbDLbox{position:absolute;top:8vh;left:50%;transform:translateX(-50%);width:80%;max-width:700px;height:80vh;background:#fff;border-radius:10px;box-shadow:0%206px%2024px%20#0003;display:flex;flex-direction:column;font:14px/1.4%20sans-serif;}#fbDLhdr{display:flex;align-items:center;justify-content:space-between;padding:10px%2016px;background:#4267b2;color:#fff;border-radius:10px%2010px%200%200;}#fbDLhdr%20h2{margin:0;font-size:15px;font-weight:600;}#fbDLclose{border:none;background:none;color:#fff;font-size:22px;cursor:pointer;line-height:1;}#fbDLtbl{flex:1%201%20auto;margin:0%2016px%2016px%2016px;overflow:auto;border:1px%20solid%20#ddd;}#fbDLtbl%20table{border-collapse:collapse;width:100%;}#fbDLtbl%20th,#fbDLtbl%20td{padding:6px%208px;text-align:left;border-bottom:1px%20solid%20#eee;font-size:13px;}#fbDLtbl%20th{background:#f5f6fa;position:sticky;top:0;}#fbDLtbl%20tr:hover{background:#fafbff;}%3C/style%3E%3Cdiv%20id=%22fbDLbox%22%3E%3Cdiv%20id=%22fbDLhdr%22%3E%3Ch2%3EFacebook%C2%A0Video%C2%A0Downloader%3C/h2%3E%3Cbutton%20id=%22fbDLclose%22%3E%C3%97%3C/button%3E%3C/div%3E%3Cdiv%20id=%22fbDLtbl%22%3E%3Ctable%3E%3Cthead%3E%3Ctr%3E%3Cth%3EFile%3C/th%3E%3Cth%3EResolution%3C/th%3E%3Cth%3EDuration%3C/th%3E%3Cth%3ESize%3C/th%3E%3C/tr%3E%3C/thead%3E%3Ctbody%3E%3C/tbody%3E%3C/table%3E%3C/div%3E%3C/div%3E%60;const%20shorten=s=%3Es.length%3E40?%60${s.slice(0,18)}%E2%80%A6${s.slice(-18)}%60:s,tbody=modal.querySelector('tbody');list.forEach(o=%3E{const%20fn=shorten(decodeURIComponent(o.u.split('/').pop().split('?')[0])||'(no%E2%80%91name)'),res=o.w?%60${o.w}%C3%97${o.h}%60:'?';const%20tr=document.createElement('tr');tr.innerHTML=%60%3Ctd%3E%3Ca%20href=%22${o.u}%22%20target=%22_blank%22%20download%3E${fn}%3C/a%3E%3C/td%3E%3Ctd%3E${res}%3C/td%3E%3Ctd%3E${fmtD(o.d)}%3C/td%3E%3Ctd%3E${fmtMB(o.sz)}%3C/td%3E%60;tbody.appendChild(tr)});modal.querySelector('#fbDLclose').onclick=()=%3Emodal.remove();document.body.appendChild(modal);})();
